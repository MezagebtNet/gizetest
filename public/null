$user_id = 2;

$user_gize_packages = App\Models\UserGizePackage::where('user_id', $user_id)->get();

        $now = \Carbon\Carbon::now();


        $available_packages = collect([]);

                foreach($user_gize_packages as $package){

            $months = $package->months;
            $start_date = $package->start_date;
            $package->expires_at = Date::createFromFormat('Y-m-d H:i:s', $package->start_date)->addMonths($months)->setTimezone(\Config::get('app.timezone'))->diffForHumans();

            $end_date = \Carbon\Carbon::createFromFormat('Y-m-d H:i:s', $start_date)->addMonths($months);

            $check = $now->between($start_date, $end_date);

            if ($check) {
                $package->status = 1;             }
            else {
                $package->status = 0;             }

            if($package->gize_package->active && $package->status){
                $available_packages = $available_packages->add($package);
            }
        }

        return $available_packages;
$user_id = 2;

$user_gize_packages = App\Models\UserGizePackage::where('user_id', $user_id)->get();

        $now = \Carbon\Carbon::now();


        $available_packages = collect([]);

                foreach($user_gize_packages as $package){

            $months = $package->months;
		  return $months;
            $start_date = $package->start_date;
            $package->expires_at = Date::createFromFormat('Y-m-d H:i:s', $package->start_date)->addMonths($months)->setTimezone(\Config::get('app.timezone'))->diffForHumans();

            $end_date = \Carbon\Carbon::createFromFormat('Y-m-d H:i:s', $start_date)->addMonths($months);

            $check = $now->between($start_date, $end_date);

            if ($check) {
                $package->status = 1;             }
            else {
                $package->status = 0;             }

            if($package->gize_package->active && $package->status){
                $available_packages = $available_packages->add($package);
            }
        }

        return $available_packages;
$user_id = 2;

$user_gize_packages = App\Models\UserGizePackage::where('user_id', $user_id)->get();

        $now = \Carbon\Carbon::now();


        $available_packages = collect([]);

                foreach($user_gize_packages as $package){

            $months = $package->months;
            $start_date = $package->start_date;
		  return $start_date;
		  
            $package->expires_at = Date::createFromFormat('Y-m-d H:i:s', $package->start_date)->addMonths($months)->setTimezone(\Config::get('app.timezone'))->diffForHumans();

            $end_date = \Carbon\Carbon::createFromFormat('Y-m-d H:i:s', $start_date)->addMonths($months);

            $check = $now->between($start_date, $end_date);

            if ($check) {
                $package->status = 1;             }
            else {
                $package->status = 0;             }

            if($package->gize_package->active && $package->status){
                $available_packages = $available_packages->add($package);
            }
        }

        return $available_packages;
$user_id = 2;

$user_gize_packages = App\Models\UserGizePackage::where('user_id', $user_id)->get();

        $now = \Carbon\Carbon::now();


        $available_packages = collect([]);

                foreach($user_gize_packages as $package){
			$gize_package = App\Models\GizePackage::find($package->id);
		  	$package_months = $gize_package->months;
            $months = $package->months;
            $start_date = $package->start_date;
		  return $package_months;
		  
            $package->expires_at = Date::createFromFormat('Y-m-d H:i:s', $package->start_date)->addMonths($months)->setTimezone(\Config::get('app.timezone'))->diffForHumans();

            $end_date = \Carbon\Carbon::createFromFormat('Y-m-d H:i:s', $start_date)->addMonths($months);

            $check = $now->between($start_date, $end_date);

            if ($check) {
                $package->status = 1;             }
            else {
                $package->status = 0;             }

            if($package->gize_package->active && $package->status){
                $available_packages = $available_packages->add($package);
            }
        }

        return $available_packages;
$user_id = 2;

$user_gize_packages = App\Models\UserGizePackage::where('user_id', $user_id)->get();

        $now = \Carbon\Carbon::now();


        $available_packages = collect([]);

                foreach($user_gize_packages as $package){
			$gize_package = App\Models\GizePackage::find($package->id);
		  	$package_months = $gize_package->months;
            $months = $package_months
            $start_date = $package->start_date;
		  
            $package->expires_at = Date::createFromFormat('Y-m-d H:i:s', $package->start_date)->addMonths($months)->setTimezone(\Config::get('app.timezone'))->diffForHumans();

            $end_date = \Carbon\Carbon::createFromFormat('Y-m-d H:i:s', $start_date)->addMonths($months);

            $check = $now->between($start_date, $end_date);

            if ($check) {
                $package->status = 1;             }
            else {
                $package->status = 0;             }

            if($package->gize_package->active && $package->status){
                $available_packages = $available_packages->add($package);
            }
        }

        return $available_packages;
$user_id = 2;

$user_gize_packages = App\Models\UserGizePackage::where('user_id', $user_id)->get();

        $now = \Carbon\Carbon::now();


        $available_packages = collect([]);

                foreach($user_gize_packages as $package){
			$gize_package = App\Models\GizePackage::find($package->id);
		  	$package_months = $gize_package->months;
            $months = $package_months;
            $start_date = $package->start_date;
		  
            $package->expires_at = Date::createFromFormat('Y-m-d H:i:s', $package->start_date)->addMonths($months)->setTimezone(\Config::get('app.timezone'))->diffForHumans();

            $end_date = \Carbon\Carbon::createFromFormat('Y-m-d H:i:s', $start_date)->addMonths($months);

            $check = $now->between($start_date, $end_date);

            if ($check) {
                $package->status = 1;             }
            else {
                $package->status = 0;             }

            if($package->gize_package->active && $package->status){
                $available_packages = $available_packages->add($package);
            }
        }

        return $available_packages;
